/*! RateIt | v1.0.23 / 04/04/2016
    https://github.com/gjunge/rateit.js | Twitter: @gjunge
*/
(function(b){function a(g){var c=g.originalEvent.changedTouches,e=c[0],d="",f;switch(g.type){case"touchmove":d="mousemove";break;case"touchend":d="mouseup";break;default:return}f=document.createEvent("MouseEvent");f.initMouseEvent(d,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null);e.target.dispatchEvent(f);g.preventDefault()}b.rateit={aria:{resetLabel:"reset rating",ratingLabel:"rating"}};b.fn.rateit=function(d,h){var k=1,c={},l="init",g=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},j;if(this.length===0){return this}if(j=b.type(d),j=="object"||d===undefined||d===null){c=b.extend({},b.fn.rateit.defaults,d)}else{if(j=="string"&&d!=="reset"&&h===undefined){return this.data("rateit"+g(d))}j=="string"&&(l="setvalue")}return this.each(function(){var x=b(this),r=function(w,p){if(p!=null){var f="aria-value"+(w=="value"?"now":w),v=x.find(".rateit-range");v.attr(f)!=undefined&&v.attr(f,p)}return arguments[0]="rateit"+g(w),x.data.apply(x,arguments)},e,C,D,o,A,q,u,i,z,m,B;if(d=="reset"){e=r("init");for(C in e){x.data(C,e[C])}r("backingfld")&&(o=b(r("backingfld")),o.val(r("value")),o.trigger("change"),o[0].min&&(o[0].min=r("min")),o[0].max&&(o[0].max=r("max")),o[0].step&&(o[0].step=r("step")));x.trigger("reset")}if(x.hasClass("rateit")||x.addClass("rateit"),D=x.css("direction")!="rtl",l=="setvalue"){if(!r("init")){throw"Can't set value before init"}d!="readonly"||h!=!0||r("readonly")||(x.find(".rateit-range").unbind(),r("wired",!1));d=="value"&&(h=h==null?r("min"):Math.max(r("min"),Math.min(r("max"),h)));r("backingfld")&&(o=b(r("backingfld")),d=="value"&&o.val(h),d=="min"&&o[0].min&&(o[0].min=h),d=="max"&&o[0].max&&(o[0].max=h),d=="step"&&o[0].step&&(o[0].step=h));r(d,h)}r("init")||(r("min",isNaN(r("min"))?c.min:r("min")),r("max",isNaN(r("max"))?c.max:r("max")),r("step",r("step")||c.step),r("readonly",r("readonly")!==undefined?r("readonly"):c.readonly),r("resetable",r("resetable")!==undefined?r("resetable"):c.resetable),r("backingfld",r("backingfld")||c.backingfld),r("starwidth",r("starwidth")||c.starwidth),r("starheight",r("starheight")||c.starheight),r("value",Math.max(r("min"),Math.min(r("max"),isNaN(r("value"))?isNaN(c.value)?c.min:c.value:r("value")))),r("ispreset",r("ispreset")!==undefined?r("ispreset"):c.ispreset),r("backingfld")&&(o=b(r("backingfld")).hide(),(o.attr("disabled")||o.attr("readonly"))&&r("readonly",!0),o[0].nodeName=="INPUT"&&(o[0].type=="range"||o[0].type=="text")&&(r("min",parseInt(o.attr("min"))||r("min")),r("max",parseInt(o.attr("max"))||r("max")),r("step",parseInt(o.attr("step"))||r("step"))),o[0].nodeName=="SELECT"&&o[0].options.length>1?(r("min",isNaN(r("min"))?Number(o[0].options[0].value):r("min")),r("max",Number(o[0].options[o[0].length-1].value)),r("step",Number(o[0].options[1].value)-Number(o[0].options[0].value)),A=o.find("option[selected]"),A.length==1&&r("value",A.val())):r("value",o.val())),q=x[0].nodeName=="DIV"?"div":"span",k++,u='<button id="rateit-reset-{{index}}" type="button" data-role="none" class="rateit-reset" aria-label="'+b.rateit.aria.resetLabel+'" aria-controls="rateit-range-{{index}}"></button><{{element}} id="rateit-range-{{index}}" class="rateit-range" tabindex="0" role="slider" aria-label="'+b.rateit.aria.ratingLabel+'" aria-owns="rateit-reset-{{index}}" aria-valuemin="'+r("min")+'" aria-valuemax="'+r("max")+'" aria-valuenow="'+r("value")+'"><{{element}} class="rateit-selected" style="height:'+r("starheight")+'px"></{{element}}><{{element}} class="rateit-hover" style="height:'+r("starheight")+'px"></{{element}}></{{element}}>',x.append(u.replace(/{{index}}/gi,k).replace(/{{element}}/gi,q)),D||(x.find(".rateit-reset").css("float","right"),x.find(".rateit-selected").addClass("rateit-selected-rtl"),x.find(".rateit-hover").addClass("rateit-hover-rtl")),r("init",JSON.parse(JSON.stringify(x.data()))));x.find(".rateit-selected, .rateit-hover").height(r("starheight"));i=x.find(".rateit-range");i.width(r("starwidth")*(r("max")-r("min"))).height(r("starheight"));z="rateit-preset"+(D?"":"-rtl");r("ispreset")?x.find(".rateit-selected").addClass(z):x.find(".rateit-selected").removeClass(z);r("value")!=null&&(m=(r("value")-r("min"))*r("starwidth"),x.find(".rateit-selected").width(m));B=x.find(".rateit-reset");B.data("wired")!==!0&&B.bind("click",function(p){p.preventDefault();B.blur();var f=b.Event("beforereset");if(x.trigger(f),f.isDefaultPrevented()){return !1}x.rateit("value",null);x.trigger("reset")}).data("wired",!0);var s=function(v,p){var f=p.changedTouches?p.changedTouches[0].pageX:p.pageX,w=f-b(v).offset().left;return D||(w=i.width()-w),w>i.width()&&(w=i.width()),w<0&&(w=0),m=Math.ceil(w/r("starwidth")*(1/r("step")))},n=function(w){var p=w*r("starwidth")*r("step"),v=i.find(".rateit-hover"),f;v.data("width")!=p&&(i.find(".rateit-selected").hide(),v.width(p).show().data("width",p),f=[w*r("step")+r("min")],x.trigger("hover",f).trigger("over",f))},t=function(p){var f=b.Event("beforerated");return(x.trigger(f,[p]),f.isDefaultPrevented())?!1:(r("value",p),r("backingfld")&&b(r("backingfld")).val(p).trigger("change"),r("ispreset")&&(i.find(".rateit-selected").removeClass(z),r("ispreset",!1)),i.find(".rateit-hover").hide(),i.find(".rateit-selected").width(p*r("starwidth")-r("min")*r("starwidth")).show(),x.trigger("hover",[null]).trigger("over",[null]).trigger("rated",[p]),!0)};r("readonly")?B.hide():(r("resetable")||B.hide(),r("wired")||(i.bind("touchmove touchend",a),i.mousemove(function(p){var f=s(this,p);n(f)}),i.mouseleave(function(){i.find(".rateit-hover").hide().width(0).data("width","");x.trigger("hover",[null]).trigger("over",[null]);i.find(".rateit-selected").show()}),i.mouseup(function(v){var p=s(this,v),f=p*r("step")+r("min");t(f);i.blur()}),i.keyup(function(f){(f.which==38||f.which==(D?39:37))&&t(Math.min(r("value")+r("step"),r("max")));(f.which==40||f.which==(D?37:39))&&t(Math.max(r("value")-r("step"),r("min")))}),r("wired",!0)),r("resetable")&&B.show());i.attr("aria-readonly",r("readonly"))})};b.fn.rateit.defaults={min:0,max:5,step:0.5,starwidth:16,starheight:16,readonly:!1,resetable:!0,ispreset:!1};b(function(){b("div.rateit, span.rateit").rateit()})})(jQuery);