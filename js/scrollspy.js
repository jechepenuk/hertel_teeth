(function(g){var f=g(window);var a=[];var b=[];var j=false;var k=0;var e={top:0,right:0,bottom:0,left:0,};function d(q,o,n,p){var m=g();g.each(a,function(x,w){var r=w.offset().top,v=w.offset().left,u=v+w.width(),t=r+w.height();var s=!(v>o||u<p||r>n||t<q);if(s){m.push(w)}});return m}function i(){++k;var p=f.scrollTop(),o=f.scrollLeft(),n=o+f.width(),m=p+f.height();var q=d(p+e.top,n+e.right,m+e.bottom,o+e.left);g.each(q,function(t,s){var r=s.data("scrollSpy:ticks");if(typeof r!="number"){s.triggerHandler("scrollSpy:enter")}s.data("scrollSpy:ticks",k)});g.each(b,function(t,s){var r=s.data("scrollSpy:ticks");if(typeof r=="number"&&r!==k){s.triggerHandler("scrollSpy:exit");s.data("scrollSpy:ticks",null)}});b=q}function h(){f.trigger("scrollSpy:winSize")}var c=(Date.now||function(){return new Date().getTime()});function l(n,p,t){var m,r,u;var s=null;var q=0;t||(t={});var o=function(){q=t.leading===false?0:c();s=null;u=n.apply(m,r);m=r=null};return function(){var v=c();if(!q&&t.leading===false){q=v}var w=p-(v-q);m=this;r=arguments;if(w<=0){clearTimeout(s);s=null;q=v;u=n.apply(m,r);m=r=null}else{if(!s&&t.trailing!==false){s=setTimeout(o,w)}}return u}}g.scrollSpy=function(m,n){m=g(m);m.each(function(r,q){a.push(g(q))});n=n||{throttle:100};e.top=n.offsetTop||0;e.right=n.offsetRight||0;e.bottom=n.offsetBottom||0;e.left=n.offsetLeft||0;var p=l(i,n.throttle||100);var o=function(){g(document).ready(p)};if(!j){f.on("scroll",o);f.on("resize",o);j=true}setTimeout(o,0);return m};g.winSizeSpy=function(m){g.winSizeSpy=function(){return f};m=m||{throttle:100};return f.on("resize",l(h,m.throttle||100))};g.fn.scrollSpy=function(m){return g.scrollSpy(g(this),m)}})(jQuery);