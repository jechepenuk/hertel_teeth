!function(d,c){"function"==typeof define&&define.amd?define(["jquery"],function(b){return c(b)}):"object"==typeof exports?module.exports=c(require("jquery")):c(jQuery)}(this,function(b){!function(i,h){i.formUtils.addValidator({name:"spamcheck",validatorFunction:function(e,d){var f=d.valAttr("captcha");return f===e},errorMessage:"",errorMessageKey:"badSecurityAnswer"}),i.formUtils.addValidator({name:"confirmation",validatorFunction:function(v,u,t,s,r){var q,p=u.valAttr("confirm")||u.attr("name")+"_confirmation",o=r.find('[name="'+p+'"]');if(!o.length){return i.formUtils.warn('Password confirmation validator: could not find an input with name "'+p+'"'),!1}if(q=o.val(),t.validateOnBlur&&!o[0].hasValidationCallback){o[0].hasValidationCallback=!0;var a=function(){u.validate()};o.on("keyup",a),r.one("formValidationSetup",function(){o[0].hasValidationCallback=!1,o.off("keyup",a)})}return v===q},errorMessage:"",errorMessageKey:"notConfirmed"});var n={amex:[15,15],diners_club:[14,14],cjb:[16,16],laser:[16,19],visa:[16,16],mastercard:[16,16],maestro:[12,19],discover:[16,16]},m=!1,l=!1;i.formUtils.addValidator({name:"creditcard",validatorFunction:function(a,o){var e=i.split(o.valAttr("allowing")||"");if(l=i.inArray("amex",e)>-1,m=l&&1===e.length,e.length>0){var d=!1;if(i.each(e,function(g,f){if(f in n){if(a.length>=n[f][0]&&a.length<=n[f][1]){return d=!0,!1}}else{i.formUtils.warn('Use of unknown credit card "'+f+'"')}}),!d){return !1}}if(""!==a.replace(new RegExp("[0-9]","g"),"")){return !1}var c=0;return i.each(a.split("").reverse(),function(g,f){f=parseInt(f,10),g%2===0?c+=f:(f*=2,c+=f<10?f:f-9)}),c%10===0},errorMessage:"",errorMessageKey:"badCreditCard"}),i.formUtils.addValidator({name:"cvv",validatorFunction:function(c){return""===c.replace(/[0-9]/g,"")&&(c+="",m?4===c.length:l?3===c.length||4===c.length:3===c.length)},errorMessage:"",errorMessageKey:"badCVV"}),i.formUtils.addValidator({name:"strength",validatorFunction:function(a,f){var e=f.valAttr("strength")||2;return e&&e>3&&(e=3),i.formUtils.validators.validate_strength.calculatePasswordStrength(a)>=e},errorMessage:"",errorMessageKey:"badStrength",calculatePasswordStrength:function(e){if(e.length<4){return 0}var d=0,f=function(o,g){for(var s="",r=0;r<g.length;r++){for(var q=!0,p=0;p<o&&p+r+o<g.length;p++){q=q&&g.charAt(p+r)===g.charAt(p+r+o)}p<o&&(q=!1),q?(r+=o-1,q=!1):s+=g.charAt(r)}return s};return d+=4*e.length,d+=1*(f(1,e).length-e.length),d+=1*(f(2,e).length-e.length),d+=1*(f(3,e).length-e.length),d+=1*(f(4,e).length-e.length),e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(d+=5),e.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(d+=5),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(d+=10),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(d+=15),e.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&e.match(/([0-9])/)&&(d+=15),e.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&e.match(/([a-zA-Z])/)&&(d+=15),(e.match(/^\w+$/)||e.match(/^\d+$/))&&(d-=10),d<0&&(d=0),d>100&&(d=100),d<20?0:d<40?1:d<=60?2:3},strengthDisplay:function(a,f){var e={fontSize:"12pt",padding:"4px",bad:"Very bad",weak:"Weak",good:"Good",strong:"Strong"};f&&i.extend(e,f),a.bind("keyup",function(){var d=i(this).val(),s="undefined"==typeof e.parent?i(this).parent():i(e.parent),r=s.find(".strength-meter"),q=i.formUtils.validators.validate_strength.calculatePasswordStrength(d),p={background:"pink",color:"#FF0000",fontWeight:"bold",border:"red solid 1px",borderWidth:"0px 0px 4px",display:"inline-block",fontSize:e.fontSize,padding:e.padding},o=e.bad;0===r.length&&(r=i("<span></span>"),r.addClass("strength-meter").appendTo(s)),d?r.show():r.hide(),1===q?o=e.weak:2===q?(p.background="lightyellow",p.borderColor="yellow",p.color="goldenrod",o=e.good):q>=3&&(p.background="lightgreen",p.borderColor="darkgreen",p.color="darkgreen",o=e.strong),r.css(p).text(o)})}});var k=function(a,t,s,r,q){var p=t.valAttr("req-params")||t.data("validation-req-params")||{},o=function(d,c){c(d)};p||(p={}),"string"==typeof p&&(p=i.parseJSON(p)),p[t.valAttr("param-name")||t.attr("name")]=s,i.ajax({url:a,type:"POST",cache:!1,data:p,dataType:"json",error:function(c){return o({valid:!1,message:"Connection failed with status: "+c.statusText},q),!1},success:function(c){o(c,q)}})};i.formUtils.addValidator({name:"server",validatorFunction:function(a,s,r,q,p,o){var f=i.formUtils.asyncValidation(this.name,s,p);return f.run(o,function(c){var d=s.valAttr("url")||r.backendUrl||document.location.href;p.addClass("validating-server-side"),s.addClass("validating-server-side"),k(d,s,a,r,function(e){p.removeClass("validating-server-side"),s.removeClass("validating-server-side"),e.message&&(s.attr(r.validationErrorMsgAttribute,e.message),s.one("validation",function(){s.removeAttr(r.validationErrorMsgAttribute)})),c(e.valid)})})},errorMessage:"",errorMessageKey:"badBackend"}),i.formUtils.addValidator({name:"letternumeric",validatorFunction:function(v,u,t,s){var r="^([a-zA-Z0-9ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",q="]+)$",p=u.valAttr("allowing"),o="";if(p){o=r+p+q;var a=p.replace(/\\/g,"");a.indexOf(" ")>-1&&(a=a.replace(" ",""),a+=s.andSpaces||i.formUtils.LANG.andSpaces),this.errorMessage=s.badAlphaNumeric+s.badAlphaNumericExtra+a}else{o=r+q,this.errorMessage=s.badAlphaNumeric}return new RegExp(o).test(v)},errorMessage:"",errorMessageKey:"requiredFields"}),i.formUtils.addValidator({name:"complexity",validatorFunction:function(x,w,v,u){var t=w.valAttr("require-uc-letter")||"0",s=w.valAttr("require-lc-letter")||"0",r=w.valAttr("require-special-char")||"0",q=w.valAttr("require-numeral")||"0",p=w.valAttr("require-length")||"0",o={"uc-letter":{pattern:"^(?=(?:.*[A-Z]){"+t+",}).+",numRequired:t,dialogEnd:u.passwordComplexityUppercaseInfo},"lc-letter":{pattern:"^(?=(?:.*[a-z]){"+s+",}).+",numRequired:s,dialogEnd:u.passwordComplexityLowercaseInfo},"special-char":{pattern:"^(?=(?:.*(_|[!\"#$%&'()*+\\\\,-./:;<=>?@[\\]^_`{|}~])){"+r+",}).+",numRequired:r,dialogEnd:u.passwordComplexitySpecialCharsInfo},numeral:{pattern:"^(?=(?:.*\\d){"+q+",}).+",numRequired:q,dialogEnd:i.formUtils.LANG.passwordComplexityNumericCharsInfo},length:{callback:function(c){return c.length>p},numRequired:p,dialogEnd:"Lorem te ipsum"}},a="";return i.each(o,function(c,A){var z=parseInt(A.numRequired,10);if(z){var y=new RegExp(A.pattern),e=!1;e=A.callback?A.callback(x):y.test(x),e?w.trigger("complexityRequirementValidation",[!0,c]):(""===a&&(a=u.passwordComplexityStart),a+=u.passwordComplexitySeparator+z+A.dialogEnd,w.trigger("complexityRequirementValidation",[!1,c]))}}),!a||(this.errorMessage=a+u.passwordComplexityEnd,!1)},errorMessage:"",errorMessageKey:""}),i.formUtils.addValidator({name:"recaptcha",validatorFunction:function(d,c){return""!==grecaptcha.getResponse(c.valAttr("recaptcha-widget-id"))},errorMessage:"",errorMessageKey:"badreCaptcha"}),i.fn.displayPasswordStrength=function(a){return new i.formUtils.validators.validate_strength.strengthDisplay(this,a),this};var j=function(a,q,p){if(q||(q=i("form")),"undefined"!=typeof grecaptcha&&!i.formUtils.hasLoadedGrecaptcha){throw new Error("reCaptcha API can not be loaded by hand, delete reCaptcha API snippet.")}if(!i.formUtils.hasLoadedGrecaptcha&&i('[data-validation~="recaptcha"]',q).length){i.formUtils.hasLoadedGrecaptcha=!0;var o="//www.google.com/recaptcha/api.js?onload=reCaptchaLoaded&render=explicit"+(p.lang?"&hl="+p.lang:""),g=document.createElement("script");g.type="text/javascript",g.async=!0,g.defer=!0,g.src=o,document.getElementsByTagName("body")[0].appendChild(g)}};h.reCaptchaLoaded=function(a){a&&"object"==typeof a&&a.length||(a=i("form"));var f=0,e=[];a.each(function(){var c=i(this),d=c.context.validationConfig||!1;d&&i('[data-validation~="recaptcha"]',c).each(function(){var u=i(this),t=document.createElement("DIV"),s=d.reCaptchaSiteKey||u.valAttr("recaptcha-sitekey"),r=d.reCaptchaTheme||u.valAttr("recaptcha-theme")||"light",q=d.reCaptchaSize||u.valAttr("recaptcha-size")||"normal",p=d.reCaptchaType||u.valAttr("recaptcha-type")||"image";if(!s){throw new Error("Google reCaptcha site key is required.")}c.attr("id")||c.attr("id","recaptcha-form-"+f++),e[c.attr("id")]=function(g){var v;i("#"+v).each(function(){i('[data-validation~="recaptcha"]',i(this)).each(function(){i(this).trigger("validation",g&&""!==g)})})},e[c.attr("id")].formID=c.attr("id");var o=grecaptcha.render(t,{sitekey:s,theme:r,size:q,type:p,callback:e[c.attr("id")],"expired-callback":e[c.attr("id")]});u.valAttr("recaptcha-widget-id",o).hide().on("beforeValidation",function(g){g.stopImmediatePropagation()}).parent().append(t)})})},i(h).on("validatorsLoaded formValidationSetup",j)}(b,window)});